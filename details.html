<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Game Details</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body{margin:0;font-family:Inter,Arial,Helvetica,sans-serif;background:#071023;color:#e6eef6}
    .toolbar{height:44px;display:flex;align-items:center;gap:8px;padding:6px;background:#0b2636}
    button{background:#0b5ed7;border:none;color:#fff;padding:6px 10px;border-radius:8px;cursor:pointer}
    button:disabled{opacity:.5;cursor:default}
    #url {font-size:12px;color:#9fb3c9;margin-left:8px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1}
    webview{width:100%;height:calc(100vh - 44px);background:#000}
  </style>
</head>
<body>
  <div class="toolbar">
    <button id="backBtn" disabled>←</button>
    <button id="forwardBtn" disabled>→</button>
    <button id="reloadBtn">⟳</button>
    <div id="url"></div>
  </div>

  <!-- webview will show the external site -->
  <webview id="wv" src="about:blank" partition="persist:gameview"></webview>

  <script>
    const params = new URLSearchParams(window.location.search);
    const targetUrl = params.get('url') || 'about:blank';
    const wv = document.getElementById('wv');
    const backBtn = document.getElementById('backBtn');
    const forwardBtn = document.getElementById('forwardBtn');
    const reloadBtn = document.getElementById('reloadBtn');
    const urlEl = document.getElementById('url');

    urlEl.textContent = targetUrl;
    wv.src = targetUrl;

    function updateNav() {
      try {
        // canGoBack/canGoForward may be synchronous on your Electron version
        const canBack = wv.canGoBack ? wv.canGoBack() : false;
        const canForward = wv.canGoForward ? wv.canGoForward() : false;
        backBtn.disabled = !canBack;
        forwardBtn.disabled = !canForward;
      } catch (e) {
        backBtn.disabled = false;
        forwardBtn.disabled = false;
      }
    }

    wv.addEventListener('did-navigate', () => { urlEl.textContent = wv.getURL(); updateNav(); });
    wv.addEventListener('did-navigate-in-page', () => { urlEl.textContent = wv.getURL(); updateNav(); });
    wv.addEventListener('did-stop-loading', () => { urlEl.textContent = wv.getURL(); updateNav(); });

    backBtn.addEventListener('click', () => {
      if (wv.canGoBack) wv.goBack(); else wv.executeJavaScript('history.back()');
    });
    forwardBtn.addEventListener('click', () => {
      if (wv.canGoForward) wv.goForward(); else wv.executeJavaScript('history.forward()');
    });
    reloadBtn.addEventListener('click', () => wv.reload());
  </script>
</body>
</html>
